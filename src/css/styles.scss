@import "./node_modules/include-media/dist/_include-media.scss";
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

:root {
  --light-gray: #b6c6d0;
  --med-light-gray: #7f8f99;
  --something: #51616b;
  --something: #364650;
  --something: #1a2832;
  --dark-gray: #10191f;
  --something: #2b2a39;
  --something: #130122;
  --something: #260033;
  --something: #54002f;
  --something: #99093c;
  --something: #cd404b;
  --something: #ff7a5f;
  --something: #fbaf5d;
  --something: #efc759;
  --something: #ffe28d;
  --something: #8dff9c;
  --something: #5df994;
  --something: #01e1c9;
  --something: #00c4bc;
  --light-blue-green: #30a0ac;
  --dark-blue-green: #0e507b;
  --dark-blue: #191042;
  --almost-black: #212529;
  --black: #000000;
  --white: #ffffff;
  --semi-transparent-white: rgba(255, 255, 255, 0.5);

  --border-radius: .25rem;
  --max-page-width: 820px;
  --square-size: 2.05rem;
  --border-width: 2px;
  --neg-border-width: -2px;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  font-size: 16px;
  color: var(--almost-black);
  line-height: 1.5rem;
}

body {
  display: block;
  position: relative;
  width: 100%;
  max-width: var(--max-page-width);
  margin: 0 auto;
  padding: 0 1rem;
}

body, button, .btn {
  font-family: 'Press Start 2P', sans-serif;
}

main {
  display: flex;
  width: 100%;
  margin: 1rem 0 2.5rem;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  overflow: auto;
  
  @include media(">=phone", "<tablet") {
    flex-direction: column;
  }
}

button, input, textarea {
  height: 1.75rem;
}

input, textarea {
  border: 1px solid var(--med-light-gray);
}

button, .btn {
  box-shadow:
  0 var(--neg-border-width) 0 0 var(--dark-blue), // top border
  var(--border-width) 0 0 0 var(--dark-blue), // right border
  0 var(--border-width) 0 0 var(--dark-blue), // bottom border
  var(--neg-border-width) 0 0 0 var(--dark-blue); // left border
}

button, .btn {
  display: inline-block;
  background: linear-gradient(var(--light-blue-green) 0%, var(--light-blue-green) 8%, var(--dark-blue-green) 9%);
  border: 1px solid var(--dark-blue-green);
  color: var(--white);
  padding: .25rem .5rem;
  margin-top: .5rem;
  text-align: center;
  cursor: pointer;

  &:hover {
    background: linear-gradient(var(--light-blue-green) 0%, var(--light-blue-green) 8%, var(--dark-blue-green) 9%);
    border-color: var(--dark-blue);
    transform: translateY(var(--neg-border-width));
    box-shadow:
    0 var(--neg-border-width) 0 0 var(--dark-blue), // top border
    var(--border-width) 0 0 0 var(--dark-blue), // right border
    0 calc(var(--border-width) * 2) 0 0 var(--dark-blue), // bottom border
    var(--neg-border-width) 0 0 0 var(--dark-blue), // left border
    var(--border-width) var(--border-width) 0 0 var(--dark-blue), // extra right border
    var(--neg-border-width) var(--border-width) 0 0 var(--dark-blue); // extra left border
  }

  &:active {
    background: var(--dark-blue-green);
    transform: translateY(0);
    box-shadow:
    0 var(--neg-border-width) 0 0 var(--dark-blue), // top border
    var(--border-width) 0 0 0 var(--dark-blue), // right border
    0 var(--border-width) 0 0 var(--dark-blue), // bottom border
    var(--neg-border-width) 0 0 0 var(--dark-blue); // left border
  }
}

.box {
  box-shadow:
  0 var(--neg-border-width) 0 0 var(--dark-blue), // top border
  var(--border-width) 0 0 0 var(--dark-blue), // right border
  0 var(--border-width) 0 0 var(--dark-blue), // bottom border
  var(--neg-border-width) 0 0 0 var(--dark-blue); // left border

  &.dark {
    background: var(--almost-black);
    border: var(--border-width) solid white;
    color: white;
    padding: calc(var(--border-width) * 4) calc(var(--border-width) * 5);
  }
  
  &.thick {
    box-shadow:
    0 calc(var(--neg-border-width) * 2) 0 0 var(--dark-blue), // top border
    calc(var(--border-width) * 2) 0 0 0 var(--dark-blue), // right border
    0 calc(var(--border-width) * 2) 0 0 var(--dark-blue), // bottom border
    calc(var(--neg-border-width) * 2) 0 0 0 var(--dark-blue); // left border

    &.dark {
      background: var(--almost-black);
      border: calc(var(--border-width) * 2) solid white;
      color: white;
      padding: calc(var(--border-width) * 4) calc(var(--border-width) * 5);
    }
  }
}

input {
  padding: .125rem .25rem;
}

p {
  font-size: 1.25rem;
}

/* Header */ 
header {
  display: flex;
  position: fixed;
  background: var(--white);
  border-bottom: 2px solid var(--dark-blue-green);
  width: 100%;
  max-width: var(--max-page-width);
  margin: 0 auto;
  padding: 1rem;
  -moz-column-gap: 1rem;
       column-gap: 1rem;
  row-gap: .25rem;
  justify-content: space-between;
  align-items: flex-end;
  flex-wrap: wrap;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;

  .new-game {
    margin-top: 0;
  }
}

/* Current Player Section */
.current-player-section {
  margin: .5rem 0 0;
}

/* Player Fleet */
.player-fleet-wrapper {
  display: block;
  background: var(--light-gray);
  width: 400px;
  margin-top: 4.5rem;
  padding: 1rem;

  .random-player-ships-btn {
    display: block;
    margin-top: 0;
    margin-bottom: 1rem;
  }

  .ships-wrapper {
    display: block;

    .ship {
      display: inline-flex;
      margin: 0 .5rem .5rem 0;
      cursor: pointer;

      &:last-of-type {
        margin-right: 0;
      }

      &.vertical {
        flex-direction: column;
      }
  
      &.invisible {
        display: none;
      }

      .ship-part {
        display: inline-block;
        background: peru;
        width: var(--square-size);
        height: var(--square-size);
  
        @for $i from 1 through 2 {
          &.patrol-boat:nth-child(#{$i}) {
            background: url("/src/images/ship-parts/patrol-boat-#{$i}.png");
            background-repeat: no-repeat;
            margin-right: -1px;
            margin-bottom: -1px;
          }
        }

        &.patrol-boat:last-of-type {
          margin-right: 0;
          margin-bottom: 0;
        }

        @for $i from 1 through 3 {
          &.destroyer:nth-child(#{$i}) {
            background: url("/src/images/ship-parts/destroyer-#{$i}.png");
            background-repeat: no-repeat;
            margin-right: -1px;
            margin-bottom: -1px;
          }
        }

        &.destroyer:last-of-type {
          margin-right: 0;
          margin-bottom: 0;
        }

        @for $i from 1 through 3 {
          &.submarine:nth-child(#{$i}) {
            background: url("/src/images/ship-parts/submarine-#{$i}.png");
            background-repeat: no-repeat;
            margin-right: -1px;
            margin-bottom: -1px;
          }
        }

        &.submarine:last-of-type {
          margin-right: 0;
          margin-bottom: 0;
        }

        @for $i from 1 through 4 {
          &.battleship:nth-child(#{$i}) {
            background: url("/src/images/ship-parts/battleship-#{$i}.png");
            background-repeat: no-repeat;
            margin-right: -1px;
            margin-bottom: -1px;
          }
        }

        &.battleship:last-of-type {
          margin-right: 0;
          margin-bottom: 0;
        }

        @for $i from 1 through 5 {
          &.carrier:nth-child(#{$i}) {
            background: url("/src/images/ship-parts/carrier-#{$i}.png");
            background-repeat: no-repeat;
            margin-right: -1px;
            margin-bottom: -1px;
          }
        }

        &.carrier:last-of-type {
          margin-right: 0;
          margin-bottom: 0;
        }


        &.vertical {
          transform: rotate(90deg);
          transform-origin: center;
        }
      }
    }

  }
}

/* Gameboard */
.board-wrapper {
  display: inline-flex;

  .x-labels {
    display: flex;
    width: 100%;
    justify-content: center;
    align-items: center;

    .x-label {
      width: var(--square-size);
      height: var(--square-size);
      text-align: center;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  }
  
  .y-labels  {
    display: flex;
    width: 100%;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    justify-content: flex-end;

    .y-label {
      width: var(--square-size);
      height: var(--square-size);
      text-align: center;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  }

  .gameboard {
    display: grid;
    background: var(--light-blue-green);
    width: 100%;
    max-width: var(--max-page-width);
    max-height: 700px;
    grid-template-columns: repeat(10, 2rem);
    grid-template-rows: repeat(10, 2rem);
    gap: 1px;
  
    .board-square {
      display: block;
      position: relative;
      background: var(--dark-blue-green);
      width: 100%;
      height: 100%;
      cursor: crosshair;

      &.ship-part {
        background-color: var(--dark-blue-green);
        transition: none;

        @for $i from 1 through 2 {
          &.patrol-boat-#{$i} {
            background: url("/src/images/ship-parts/patrol-boat-#{$i}.png"), var(--dark-blue-green);
            background-repeat: no-repeat;
          }
        }
        @for $i from 1 through 3 {
          &.destroyer-#{$i} {
            background: url("/src/images/ship-parts/destroyer-#{$i}.png"), var(--dark-blue-green);
            background-repeat: no-repeat;
          }
        }
        @for $i from 1 through 3 {
          &.submarine-#{$i} {
            background: url("/src/images/ship-parts/submarine-#{$i}.png"), var(--dark-blue-green);
            background-repeat: no-repeat;
          }
        }
        @for $i from 1 through 4 {
          &.battleship-#{$i} {
            background: url("/src/images/ship-parts/battleship-#{$i}.png"), var(--dark-blue-green);
            background-repeat: no-repeat;
          }
        }
        @for $i from 1 through 5 {
          &.carrier-#{$i} {
            background: url("/src/images/ship-parts/carrier-#{$i}.png"), var(--dark-blue-green);
            background-repeat: no-repeat;
          }
        }

        &.vertical {
          transform: rotate(90deg);
          transform-origin: center;
        }
  
        &.hit:before {
          content: "";
          background: url("/src/images/explosion-sprite_000.png"), transparent;
          background-repeat: no-repeat;
          display: flex;
          position: absolute;
          justify-content: center;
          align-items: center;
          width: 100%;
          height: 100%;
          left: 0;
          top: 0;
          -webkit-animation: explosion-smoke-animation .75s linear .1s;
                  animation: explosion-smoke-animation .75s linear .1s;
          -webkit-animation-timing-function: steps(8);
                  animation-timing-function: steps(8);
        }

        &.smoke:before {
          content: "";
          background: url("/src/images/smoke-sprite_000.png"), transparent;
          background-repeat: no-repeat;
          display: flex;
          position: absolute;
          justify-content: center;
          align-items: center;
          width: 100%;
          height: 100%;
          left: 0;
          top: 0;
          -webkit-animation: explosion-smoke-animation 1.5s infinite .75s;
                  animation: explosion-smoke-animation 1.5s infinite .75s;
          -webkit-animation-timing-function: steps(8);
                  animation-timing-function: steps(8);
        }
      }

      &:hover {
        background: lightblue;
        transition: all ease-in-out .1s;
      }

      &.placement-hover {
        background: white;
        transition: all ease-in-out .1s;
      }

      &.miss {
        background: var(--dark-blue);
      }

    }
  }
}

/* Animations */

@-webkit-keyframes explosion-smoke-animation {
  from { 
    background-position: 0px;
  }
  to { 
    background-position: -256px;
  }
}

@keyframes explosion-smoke-animation {
  from { 
    background-position: 0px;
  }
  to { 
    background-position: -256px;
  }
}

/* Utility Classes */
.opacity-0 {
  opacity: 0;
}

.hidden {
  display: none;
}